"use strict";window.onload=function(){var n=document.getElementsByClassName("banner_con--hover"),e=document.getElementsByClassName("twomeum"),c=document.getElementsByClassName("yingcang")[0],o=document.getElementsByClassName(" banner_con")[0];options(n,e),levelMeum(c,o),meumscroll();var a="name="+ckValue,i=document.getElementById("cart");ajax("post","../api/07car.php",a,function(n){for(var o=JSON.parse(n),e=0;e<o.length;e++){var c=o[e].id;ajax("get","../api/06listJump.php","id="+c,function(n){var e=JSON.parse(n);console.log(e);var c=e.map(function(n){return'<li class="goods" data-id="'+n.id+'">\n                                <p class="good_check">\n                                    <input type="checkbox" name="good" value="" />\n                                </p>\n                                <p class="good_name">\n                                    <img src="'+n.img2+'" alt="" class="goods-img">\n                                    <i class="changdu">'+n.name+'</i>\n                                </p>\n                                <p class="good_price">￥'+n.price+'</p>\n                                <p class="good_youhui">/</p>\n                                <p class="num">\n                                    <span class="cutnum">-</span>\n                                    <input class="nownum" type="text" value="1" />\n                                    <span class="addnum">+</span>\n                                </p>\n                                <p class="good_zhongliang">'+n.pointer+'</p>\n                                <p class="good_total">￥'+n.price+'</p>\n                                <p class="good_kucun">现货</p>\n                                <p class="good_shoucang">收藏</p>\n                                <p class="good_del">\n                                    <a href="javascript:;">删除</a>\n                                </p>\n                            </li>'}).join("");i.innerHTML+=c,$("#allchecked input").on("click",function(){$("#allchecked input").prop("checked")?$(".good_check input").prop("checked",!0):$(".good_check input").prop("checked",!1),a()}),$(".good_check input").on("click",function(){$(".good_check input:checked").size()==$(".good_check input").size()?$("#allchecked input").prop("checked",!0):$("#allchecked input").prop("checked",!1),a()});var o=[];function a(){o=[],$(".good_check input").each(function(n,e){$(".good_check input").eq(n).prop("checked")&&o.push(n)});var e=0,c=0;o.forEach(function(n){e+=1*$(".nownum").eq(n).val(),c+=1*$(".good_total").eq(n).text().slice(2)}),$("#allnum2").html("数量总计：已选中 "+e+" 件（不含运费）"),$("#allnum").html(e),$("#totalprice span").html("￥ "+c.toFixed(2))}$("#alldel").on("click",function(){confirm("您确定要删除全部商品吗？")?($("#del").css("display","none"),$("#over").css("display","none"),$(".goods").css("display","none"),$(".disnone").css("display","block")):($("#del").css("display","block"),$("#over").css("display","block"),$(".goods").css("display","block"),$(".disnone").css("display","none"))})})}o=[];function a(){o=[],$(".good_check input").each(function(n,e){$(".good_check input").eq(n).prop("checked")&&o.push(n)});var e=0,c=0;o.forEach(function(n){e+=1*$(".nownum").eq(n).val(),c+=1*$(".good_total").eq(n).text().slice(2)}),$("#allnum2").html("数量总计：已选中 "+e+" 件（不含运费）"),$("#allnum").html(e),$("#totalprice span").html("￥ "+c.toFixed(2))}function s(n){var e=(1*n.parent().find("input").val()*n.parent().prev().prev().text().slice(1)).toFixed(2);n.parent().next().next().html("￥ "+e),a()}$("#cart").on("click",".addnum",function(n){var e=1*$(this).prev().val();100<=++e&&(e=100),$(this).prev().val(e),s($(this))}),$("#cart").on("click",".cutnum",function(){var n=1*$(this).next().val();--n<=1&&(n=1),$(this).next().val(n),s($(this))}),$("#cart").on("input",".nownum",function(){s($(this))});var t=cookie.get("user"),l="";$("#cart").on("click",".good_del",function(){if(confirm("您确定要删除吗?")){var c=function(){$("#cart .addnum").size()<=0?($("#del").css("display","none"),$("#over").css("display","none"),$(".disnone").css("display","block")):($("#del").css("display","block"),$("#over").css("display","block"),$(".disnone").css("display","none"))};l=$(this).parent().get(0).dataset.id,$(this).parent().remove();ajax("post","../api/10delcar.php","id="+l+"&user="+t,function(n){if(console.log(n),n){alert("您已成功删除商品！");var e="name="+t;document.getElementById("cart");ajax("post","../api/07car.php",e,function(n){JSON.parse(n)})}c(),a()}),$("#delall").on("click",function(){if(confirm("您确定要删除选中的商品吗？"))for(var n=o.length-1;0<=n;n--)$("#cart .goods").eq(o[n]).remove();o=[],c(),a()})}})})};